<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="data.sqlite3" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="88176"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="soubi_skill_tokusyukouka" custom_title="0" dock_id="3" table="4,24:mainsoubi_skill_tokusyukouka"/><table title="soubi_skill_tokusyukouka" custom_title="0" dock_id="2" table="4,24:mainsoubi_skill_tokusyukouka"/><table title="bougu" custom_title="0" dock_id="1" table="4,5:mainbougu"/><table title="soubi_skill_tokusyukouka_intermate" custom_title="0" dock_id="4" table="4,34:mainsoubi_skill_tokusyukouka_intermate"/><dock_state state="000000ff00000000fd0000000100000002000004250000036dfc0100000001fc00000000000004250000013400fffffffa000000030100000004fb000000160064006f0063006b00420072006f00770073006500310100000000ffffffff0000013400fffffffb000000160064006f0063006b00420072006f00770073006500320100000000ffffffff0000013400fffffffb000000160064006f0063006b00420072006f00770073006500330100000000ffffffff0000013400fffffffb000000160064006f0063006b00420072006f00770073006500340100000000ffffffff0000013400ffffff000002cf0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="bougu" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="35"/><column index="2" value="35"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="skill_tokusyukouka" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="300"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="soubi_skill_tokusyukouka" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="167"/><column index="2" value="250"/><column index="3" value="64"/><column index="4" value="77"/><column index="5" value="179"/><column index="6" value="114"/></column_widths><filter_values><column index="0" value="あまぐも"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="soubi_skill_tokusyukouka_intermate" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="167"/><column index="2" value="300"/></column_widths><filter_values><column index="0" value="あまぐも"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="v_item_skill_tokusyukouka" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="121"/><column index="2" value="39"/><column index="3" value="34"/><column index="4" value="41"/><column index="5" value="121"/><column index="6" value="250"/><column index="7" value="64"/><column index="8" value="77"/><column index="9" value="174"/><column index="10" value="162"/><column index="11" value="190"/><column index="12" value="73"/><column index="13" value="80"/><column index="14" value="45"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1*">DROP VIEW IF EXISTS soubi_hosei;
CREATE VIEW soubi_hosei AS

WITH zyoutaiizyou_kouka AS (
SELECT * FROM kouka
WHERE kouka IN('成功率','耐性')
)
,
zyoutaiizyou_variation AS (
SELECT CASE zyoutaiizyou_group
WHEN '全状態異常' THEN 'ずべての状態異常'
ELSE zyoutaiizyou_group
END||kouka AS tokusyukouka
, zyoutaiizyou_kouka.`order` AS kouka_order
, zyoutaiizyou_group.`order` AS zyoutaiizyou_order
FROM zyoutaiizyou_group
CROSS JOIN zyoutaiizyou_kouka
)
,
table_a AS (
SELECT soubi
, skill_tokusyukouka
, sum(hosei_per)
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;全属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;全属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;メラ属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;メラ属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ギラ属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;ギラ属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ヒャド属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;ヒャド属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;バギ属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;バギ属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;イオ属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;イオ属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドルマ属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;ドルマ属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;デイン属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;デイン属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ジバリア属性ダメージ&quot; THEN hosei_per END), 0) AS &quot;ジバリア属性ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;メラ属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;メラ属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ギラ属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;ギラ属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ヒャド属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;ヒャド属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;バギ属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;バギ属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;イオ属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;イオ属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドルマ属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;ドルマ属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;デイン属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;デイン属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ジバリア属性斬撃・体技ダメージ&quot; THEN hosei_per END), 0) AS &quot;ジバリア属性斬撃・体技ダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;メラ属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;メラ属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ギラ属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;ギラ属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ヒャド属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;ヒャド属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;バギ属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;バギ属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;イオ属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;イオ属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドルマ属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;ドルマ属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;デイン属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;デイン属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ジバリア属性じゅもんダメージ&quot; THEN hosei_per END), 0) AS &quot;ジバリア属性じゅもんダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;スライム系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;スライム系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;けもの系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;けもの系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドラゴン系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;ドラゴン系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;虫系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;虫系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;鳥系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;鳥系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;植物系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;植物系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;物質系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;物質系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;マシン系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;マシン系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ゾンビ系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;ゾンビ系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;悪魔系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;悪魔系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;エレメント系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;エレメント系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;怪人系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;怪人系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;水系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;水系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;？？？？系へのダメージ&quot; THEN hosei_per END), 0) AS &quot;？？？？系へのダメージ&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;スキルHP回復効果&quot; THEN hosei_per END), 0) AS &quot;スキルHP回復効果&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;とくぎHP回復効果&quot; THEN hosei_per END), 0) AS &quot;とくぎHP回復効果&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;じゅもんHP回復効果&quot; THEN hosei_per END), 0) AS &quot;じゅもんHP回復効果&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;みかわし率&quot; THEN hosei_per END), 0) AS &quot;みかわし率&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;全属性耐性&quot; THEN hosei_per END), 0) AS &quot;全属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;メラ属性耐性&quot; THEN hosei_per END), 0) AS &quot;メラ属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ギラ属性耐性&quot; THEN hosei_per END), 0) AS &quot;ギラ属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ヒャド属性耐性&quot; THEN hosei_per END), 0) AS &quot;ヒャド属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;バギ属性耐性&quot; THEN hosei_per END), 0) AS &quot;バギ属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;イオ属性耐性&quot; THEN hosei_per END), 0) AS &quot;イオ属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドルマ属性耐性&quot; THEN hosei_per END), 0) AS &quot;ドルマ属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;デイン属性耐性&quot; THEN hosei_per END), 0) AS &quot;デイン属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ジバリア属性耐性&quot; THEN hosei_per END), 0) AS &quot;ジバリア属性耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;スライム系への耐性&quot; THEN hosei_per END), 0) AS &quot;スライム系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;けもの系への耐性&quot; THEN hosei_per END), 0) AS &quot;けもの系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ドラゴン系への耐性&quot; THEN hosei_per END), 0) AS &quot;ドラゴン系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;虫系への耐性&quot; THEN hosei_per END), 0) AS &quot;虫系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;鳥系への耐性&quot; THEN hosei_per END), 0) AS &quot;鳥系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;植物系への耐性&quot; THEN hosei_per END), 0) AS &quot;植物系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;物質系への耐性&quot; THEN hosei_per END), 0) AS &quot;物質系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;マシン系への耐性&quot; THEN hosei_per END), 0) AS &quot;マシン系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ゾンビ系への耐性&quot; THEN hosei_per END), 0) AS &quot;ゾンビ系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;悪魔系への耐性&quot; THEN hosei_per END), 0) AS &quot;悪魔系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;エレメント系への耐性&quot; THEN hosei_per END), 0) AS &quot;エレメント系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;怪人系への耐性&quot; THEN hosei_per END), 0) AS &quot;怪人系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;水系への耐性&quot; THEN hosei_per END), 0) AS &quot;水系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;？？？？系への耐性&quot; THEN hosei_per END), 0) AS &quot;？？？？系への耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;すべての状態異常耐性&quot; THEN hosei_per END), 0) AS &quot;すべての状態異常耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;毒耐性&quot; THEN hosei_per END), 0) AS &quot;毒耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;麻痺耐性&quot; THEN hosei_per END), 0) AS &quot;麻痺耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;眠り耐性&quot; THEN hosei_per END), 0) AS &quot;眠り耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;混乱耐性&quot; THEN hosei_per END), 0) AS &quot;混乱耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;封印耐性&quot; THEN hosei_per END), 0) AS &quot;封印耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;幻惑耐性&quot; THEN hosei_per END), 0) AS &quot;幻惑耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;呪い耐性&quot; THEN hosei_per END), 0) AS &quot;呪い耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;魅了耐性&quot; THEN hosei_per END), 0) AS &quot;魅了耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;怯え耐性&quot; THEN hosei_per END), 0) AS &quot;怯え耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;転び耐性&quot; THEN hosei_per END), 0) AS &quot;転び耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;踊り耐性&quot; THEN hosei_per END), 0) AS &quot;踊り耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;縛り耐性&quot; THEN hosei_per END), 0) AS &quot;縛り耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;石化耐性&quot; THEN hosei_per END), 0) AS &quot;石化耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ブレス封じ耐性&quot; THEN hosei_per END), 0) AS &quot;ブレス封じ耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;感電耐性&quot; THEN hosei_per END), 0) AS &quot;感電耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;悪い状態変化耐性&quot; THEN hosei_per END), 0) AS &quot;悪い状態変化耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;攻撃減耐性&quot; THEN hosei_per END), 0) AS &quot;攻撃減耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;守備減耐性&quot; THEN hosei_per END), 0) AS &quot;守備減耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;すばやさ減耐性&quot; THEN hosei_per END), 0) AS &quot;すばやさ減耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;じゅもん攻撃減耐性&quot; THEN hosei_per END), 0) AS &quot;じゅもん攻撃減耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;じゅもん耐性減耐性&quot; THEN hosei_per END), 0) AS &quot;じゅもん耐性減耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;即死耐性&quot; THEN hosei_per END), 0) AS &quot;即死耐性&quot;
, coalesce(sum(CASE WHEN skill_tokusyukouka = &quot;ふきとばし耐性&quot; THEN hosei_per END), 0) AS &quot;ふきとばし耐性&quot;FROM soubi_skill_tokusyukouka
GROUP BY skill_tokusyukouka, soubi
)

SELECT soubi
, sum(&quot;全属性ダメージ&quot;) AS &quot;全属性ダメージ&quot;
, sum(&quot;メラ属性ダメージ&quot;) AS &quot;メラ属性ダメージ&quot;
, sum(&quot;ギラ属性ダメージ&quot;) AS &quot;ギラ属性ダメージ&quot;
, sum(&quot;ヒャド属性ダメージ&quot;) AS &quot;ヒャド属性ダメージ&quot;
, sum(&quot;バギ属性ダメージ&quot;) AS &quot;バギ属性ダメージ&quot;
, sum(&quot;イオ属性ダメージ&quot;) AS &quot;イオ属性ダメージ&quot;
, sum(&quot;ドルマ属性ダメージ&quot;) AS &quot;ドルマ属性ダメージ&quot;
, sum(&quot;デイン属性ダメージ&quot;) AS &quot;デイン属性ダメージ&quot;
, sum(&quot;ジバリア属性ダメージ&quot;) AS &quot;ジバリア属性ダメージ&quot;
, sum(&quot;メラ属性斬撃・体技ダメージ&quot;) AS &quot;メラ属性斬撃・体技ダメージ&quot;
, sum(&quot;ギラ属性斬撃・体技ダメージ&quot;) AS &quot;ギラ属性斬撃・体技ダメージ&quot;
, sum(&quot;ヒャド属性斬撃・体技ダメージ&quot;) AS &quot;ヒャド属性斬撃・体技ダメージ&quot;
, sum(&quot;バギ属性斬撃・体技ダメージ&quot;) AS &quot;バギ属性斬撃・体技ダメージ&quot;
, sum(&quot;イオ属性斬撃・体技ダメージ&quot;) AS &quot;イオ属性斬撃・体技ダメージ&quot;
, sum(&quot;ドルマ属性斬撃・体技ダメージ&quot;) AS &quot;ドルマ属性斬撃・体技ダメージ&quot;
, sum(&quot;デイン属性斬撃・体技ダメージ&quot;) AS &quot;デイン属性斬撃・体技ダメージ&quot;
, sum(&quot;ジバリア属性斬撃・体技ダメージ&quot;) AS &quot;ジバリア属性斬撃・体技ダメージ&quot;
, sum(&quot;メラ属性じゅもんダメージ&quot;) AS &quot;メラ属性じゅもんダメージ&quot;
, sum(&quot;ギラ属性じゅもんダメージ&quot;) AS &quot;ギラ属性じゅもんダメージ&quot;
, sum(&quot;ヒャド属性じゅもんダメージ&quot;) AS &quot;ヒャド属性じゅもんダメージ&quot;
, sum(&quot;バギ属性じゅもんダメージ&quot;) AS &quot;バギ属性じゅもんダメージ&quot;
, sum(&quot;イオ属性じゅもんダメージ&quot;) AS &quot;イオ属性じゅもんダメージ&quot;
, sum(&quot;ドルマ属性じゅもんダメージ&quot;) AS &quot;ドルマ属性じゅもんダメージ&quot;
, sum(&quot;デイン属性じゅもんダメージ&quot;) AS &quot;デイン属性じゅもんダメージ&quot;
, sum(&quot;ジバリア属性じゅもんダメージ&quot;) AS &quot;ジバリア属性じゅもんダメージ&quot;
, sum(&quot;スライム系へのダメージ&quot;) AS &quot;スライム系へのダメージ&quot;
, sum(&quot;けもの系へのダメージ&quot;) AS &quot;けもの系へのダメージ&quot;
, sum(&quot;ドラゴン系へのダメージ&quot;) AS &quot;ドラゴン系へのダメージ&quot;
, sum(&quot;虫系へのダメージ&quot;) AS &quot;虫系へのダメージ&quot;
, sum(&quot;鳥系へのダメージ&quot;) AS &quot;鳥系へのダメージ&quot;
, sum(&quot;植物系へのダメージ&quot;) AS &quot;植物系へのダメージ&quot;
, sum(&quot;物質系へのダメージ&quot;) AS &quot;物質系へのダメージ&quot;
, sum(&quot;マシン系へのダメージ&quot;) AS &quot;マシン系へのダメージ&quot;
, sum(&quot;ゾンビ系へのダメージ&quot;) AS &quot;ゾンビ系へのダメージ&quot;
, sum(&quot;悪魔系へのダメージ&quot;) AS &quot;悪魔系へのダメージ&quot;
, sum(&quot;エレメント系へのダメージ&quot;) AS &quot;エレメント系へのダメージ&quot;
, sum(&quot;怪人系へのダメージ&quot;) AS &quot;怪人系へのダメージ&quot;
, sum(&quot;水系へのダメージ&quot;) AS &quot;水系へのダメージ&quot;
, sum(&quot;？？？？系へのダメージ&quot;) AS &quot;？？？？系へのダメージ&quot;
, sum(&quot;スキルHP回復効果&quot;) AS &quot;スキルHP回復効果&quot;
, sum(&quot;とくぎHP回復効果&quot;) AS &quot;とくぎHP回復効果&quot;
, sum(&quot;じゅもんHP回復効果&quot;) AS &quot;じゅもんHP回復効果&quot;
, sum(&quot;みかわし率&quot;) AS &quot;みかわし率&quot;
, sum(&quot;全属性耐性&quot;) AS &quot;全属性耐性&quot;
, sum(&quot;メラ属性耐性&quot;) AS &quot;メラ属性耐性&quot;
, sum(&quot;ギラ属性耐性&quot;) AS &quot;ギラ属性耐性&quot;
, sum(&quot;ヒャド属性耐性&quot;) AS &quot;ヒャド属性耐性&quot;
, sum(&quot;バギ属性耐性&quot;) AS &quot;バギ属性耐性&quot;
, sum(&quot;イオ属性耐性&quot;) AS &quot;イオ属性耐性&quot;
, sum(&quot;ドルマ属性耐性&quot;) AS &quot;ドルマ属性耐性&quot;
, sum(&quot;デイン属性耐性&quot;) AS &quot;デイン属性耐性&quot;
, sum(&quot;ジバリア属性耐性&quot;) AS &quot;ジバリア属性耐性&quot;
, sum(&quot;スライム系への耐性&quot;) AS &quot;スライム系への耐性&quot;
, sum(&quot;けもの系への耐性&quot;) AS &quot;けもの系への耐性&quot;
, sum(&quot;ドラゴン系への耐性&quot;) AS &quot;ドラゴン系への耐性&quot;
, sum(&quot;虫系への耐性&quot;) AS &quot;虫系への耐性&quot;
, sum(&quot;鳥系への耐性&quot;) AS &quot;鳥系への耐性&quot;
, sum(&quot;植物系への耐性&quot;) AS &quot;植物系への耐性&quot;
, sum(&quot;物質系への耐性&quot;) AS &quot;物質系への耐性&quot;
, sum(&quot;マシン系への耐性&quot;) AS &quot;マシン系への耐性&quot;
, sum(&quot;ゾンビ系への耐性&quot;) AS &quot;ゾンビ系への耐性&quot;
, sum(&quot;悪魔系への耐性&quot;) AS &quot;悪魔系への耐性&quot;
, sum(&quot;エレメント系への耐性&quot;) AS &quot;エレメント系への耐性&quot;
, sum(&quot;怪人系への耐性&quot;) AS &quot;怪人系への耐性&quot;
, sum(&quot;水系への耐性&quot;) AS &quot;水系への耐性&quot;
, sum(&quot;？？？？系への耐性&quot;) AS &quot;？？？？系への耐性&quot;
, sum(&quot;すべての状態異常耐性&quot;) AS &quot;すべての状態異常耐性&quot;
, sum(&quot;毒耐性&quot;) AS &quot;毒耐性&quot;
, sum(&quot;麻痺耐性&quot;) AS &quot;麻痺耐性&quot;
, sum(&quot;眠り耐性&quot;) AS &quot;眠り耐性&quot;
, sum(&quot;混乱耐性&quot;) AS &quot;混乱耐性&quot;
, sum(&quot;封印耐性&quot;) AS &quot;封印耐性&quot;
, sum(&quot;幻惑耐性&quot;) AS &quot;幻惑耐性&quot;
, sum(&quot;呪い耐性&quot;) AS &quot;呪い耐性&quot;
, sum(&quot;魅了耐性&quot;) AS &quot;魅了耐性&quot;
, sum(&quot;怯え耐性&quot;) AS &quot;怯え耐性&quot;
, sum(&quot;転び耐性&quot;) AS &quot;転び耐性&quot;
, sum(&quot;踊り耐性&quot;) AS &quot;踊り耐性&quot;
, sum(&quot;縛り耐性&quot;) AS &quot;縛り耐性&quot;
, sum(&quot;石化耐性&quot;) AS &quot;石化耐性&quot;
, sum(&quot;ブレス封じ耐性&quot;) AS &quot;ブレス封じ耐性&quot;
, sum(&quot;感電耐性&quot;) AS &quot;感電耐性&quot;
, sum(&quot;悪い状態変化耐性&quot;) AS &quot;悪い状態変化耐性&quot;
, sum(&quot;攻撃減耐性&quot;) AS &quot;攻撃減耐性&quot;
, sum(&quot;守備減耐性&quot;) AS &quot;守備減耐性&quot;
, sum(&quot;すばやさ減耐性&quot;) AS &quot;すばやさ減耐性&quot;
, sum(&quot;じゅもん攻撃減耐性&quot;) AS &quot;じゅもん攻撃減耐性&quot;
, sum(&quot;じゅもん耐性減耐性&quot;) AS &quot;じゅもん耐性減耐性&quot;
, sum(&quot;即死耐性&quot;) AS &quot;即死耐性&quot;
, sum(&quot;ふきとばし耐性&quot;) AS &quot;ふきとばし耐性&quot;
FROM table_a
GROUP BY soubi
order by soubi, skill_tokusyukouka
;

SELECT * FROM soubi_hosei;
</sql><sql name="SQL 3*">DROP VIEW IF EXISTS soubi_skill_tokusyukouka;
CREATE VIEW soubi_skill_tokusyukouka AS
WITH
 genkaitoppa_unwrap AS (
 SELECT
  soubi
  , skill_tokusyukouka_intermate
  , regexp_capture(skill_tokusyukouka_intermate, '^(?:↑[1-4]:)?(.*)', 1) AS genkaitoppa_unwrap
  , regexp_capture(skill_tokusyukouka_intermate, '^↑([1-4]):', 1) AS genkaitoppa_level
 FROM soubi_skill_tokusyukouka_intermate
 )
 
  , condition_unwrap AS (
  SELECT
   soubi
   , skill_tokusyukouka_intermate
   , genkaitoppa_unwrap
   , regexp_capture(genkaitoppa_unwrap, '(.*?)(?:【.+?】)*$', 1) AS condition_unwrap
   , regexp_capture(genkaitoppa_unwrap, '(?:【.+?】)*$') AS condition
   , genkaitoppa_level
   FROM genkaitoppa_unwrap
  )
 
 ,hosei_unwrap AS (
 SELECT
  soubi
  , skill_tokusyukouka_intermate
  , genkaitoppa_unwrap
  , condition_unwrap
  , regexp_capture(condition_unwrap, '(.*?)(?:[\+-]\d+)%$',1) AS hosei_unwrap
  , CAST(regexp_capture(condition_unwrap, '([\+-]\d+)%$', 1) as INTEGER) AS hosei_per
  , NULL AS hosei_value
  , condition
  , genkaitoppa_level
 FROM condition_unwrap
 WHERE condition_unwrap REGEXP '[\+-]\d+%$'
 UNION ALL
  SELECT
  soubi
  , skill_tokusyukouka_intermate
  , genkaitoppa_unwrap
  , condition_unwrap
  , regexp_capture(condition_unwrap, '(.*?)(?:[\+-]\d+)$',1) AS hosei_unwrap
  , NULL AS hosei_per
  , CAST(regexp_capture(condition_unwrap, '([\+-]\d+)$', 1) as INTEGER) AS hosei_value
  , condition
  , genkaitoppa_level
 FROM condition_unwrap
 WHERE condition_unwrap REGEXP '[\+-]\d+$'
 UNION ALL
  SELECT
  soubi
  , skill_tokusyukouka_intermate
  , genkaitoppa_unwrap
  , condition_unwrap
  , condition_unwrap AS hosei_unwrap
  , NULL AS hosei_per
  , NULL AS hosei_value
  , condition
  , genkaitoppa_level
 FROM condition_unwrap
 WHERE condition_unwrap NOT REGEXP '[\+-]\d+%?$'
 
)

 ,for_debugg AS (
  SELECT
   soubi
   , skill_tokusyukouka_intermate
   , genkaitoppa_unwrap
   , condition_unwrap
   , hosei_unwrap
   , hosei_per
   , hosei_value
   , condition
   , genkaitoppa_level
  FROM hosei_unwrap
 )
/*SELECT * FROM for_debugg*/

SELECT
 soubi
 , hosei_unwrap AS skill_tokusyukouka
 , hosei_per
 , hosei_value
 , condition
 , genkaitoppa_level

 FROM for_debugg
 order by soubi
 ;
SELECT * FROM soubi_skill_tokusyukouka</sql><current_tab id="0"/></tab_sql></sqlb_project>
